@import 'sprite-mixin.scss';

body,
body[data-theme="light"] {
  --bg-color: #fff;
  --font-color: #1b1e23;
  --left-time-color: red;
  --feature-color : #4b9aaa;
}
body[data-theme="dark"] {
  --bg-color: #1b1e23;
  --font-color: #fff;
  --left-time-color: red;
  --feature-color : #4b9aaa;
}

$size: 80vmin;
$big-indicator-width: 0.03;
$big-indicator-height: 0.007;
$small-indicator-width: 0.01;
$small-indicator-height: 0.003;

html,
body {
  margin: 0; 
  height: 100%;
  overflow: hidden;
}
body {
  transition: background-color ease 0.3s, color ease 0.3s;
  background: var(--bg-color);
  font-family: sans-serif;
  color: var(--font-color);
}
button{
  background: inherit; 
  border:none; 
  box-shadow:none; 
  border-radius:0; 
  padding:0; 
  overflow:visible; 
}

@keyframes blinking-background {
  0%, 40% {
    background-color: rgba(var(--left-time-color), 0);
  }
  50%, 90% {
    background-color: rgba(var(--left-time-color), 0.5);
  }
}

#root {
  height: 100%;
}

.App {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 100%;
  user-select: none;

  &.finished {
    animation: blinking-background 3s ease infinite;
  }
}

.clock {
  &__container {
    height: $size;
    width: $size;
    display: flex;
    justify-content: center;
    position: relative;
  }
  &__indicator__wrapper {
    transform: translate(#{($size / 2)}, #{($size / 2)});
  }
  &__indicator {
    position: absolute;
    width: #{($size * $small-indicator-width)};
    left: #{-($size * $small-indicator-width / 2)};
    height: #{($size * $small-indicator-height)};
    background: var(--feature-color);
    z-index: 2;
    &:nth-of-type(5n) {
      width: #{($size * $big-indicator-width)};
      left: #{-($size * $big-indicator-width / 2)};
      height: #{($size * $big-indicator-height)};
    }
    @for $i from 1 through 60 {
      &:nth-of-type(#{$i}) {
        transform: rotateZ(calc(6deg * #{$i})) translateX(-#{($size * 0.5)});
      }
    }
  }
  &__label__wrapper {
    transform: translate(#{($size / 2)}, #{($size / 2)});
  }
  &__label {
    position: absolute;
    font-size: #{($size * 0.055)};
    @for $i from 1 through 60 {
      &:nth-of-type(#{$i}) {
        transform: 
          translateX(-50%) 
          translateY(-50%) 
          rotateZ(calc(30deg - 30deg * #{$i})) 
          translateY(-#{($size * 0.56)}) 
          rotateZ(calc(30deg * #{$i} - 30deg));
      }
    }
  }
  &__axis {
    position: absolute;
    background: var(--feature-color);
    width: 5px;
    height: 5px;
    border-radius: 3px;
    z-index: 4;
    top: #{($size * 0.5)};
    left: #{($size * 0.5 - 1 * 0.5)};
  }
  &__progress__wrapper {
    transition: transform ease 0.3s;
    opacity: 0.6;
  }
  &__progress__left, &__progress__right {
    width: #{($size / 2)};
    height: $size;
    top: 2.5px;
    display: inline-block;
    position: relative;
    overflow: hidden;
    z-index: 3;
    &:before {
      height: inherit;
      width: inherit;
      position: absolute;
      content: "";
      background-color: var(--left-time-color);
    }
  }
  &__progress__left:before {
    border-radius: #{($size / 2)} 0 0 #{($size / 2)};
    transform-origin: 100% 50%;
    transform: rotate(#{var(--degree)});
  }
  &__progress__right:before {
    border-radius: 0 #{($size / 2)} #{($size / 2)} 0;
    transform-origin: 0 50%;
    transform: rotate(#{var(--degree)});
  }
}

@keyframes time {
  to {
    transform: rotateZ(360deg);
  }
}

.button {
  &__group {
    position: fixed;
    margin: #{($size * 0.03)};
    bottom: 0;
    right: 0;
  }
  &__sound {
    width: #{($size * 0.08)};
    height: #{($size * 0.08)};
    &.on {
      @include img-volume-black;
    }
    &.off {
      @include img-mute-black;
    }
  }
  &__theme {
    margin-left: #{($size * 0.03)};
    width: #{($size * 0.08)};
    height: #{($size * 0.08)};
    @include img-light-black;
  }
}

[data-theme='dark'] {
  .button {
    &__sound {
      &.on {
        @include img-volume-white;
      }
      &.off {
        @include img-mute-white;
      }
    }
    &__theme {
      @include img-light-white;
    }
  }
}